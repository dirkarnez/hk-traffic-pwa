(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function r(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(t){if(t.ep)return;t.ep=!0;const a=r(t);fetch(t.href,a)}})();function c(n,s){const r=n.getTime(),e=s.getTime(),t=Math.abs(e-r),a=Math.floor(t/1e3),o=Math.floor(a/60),u=a%60;return{minutes:o,seconds:u}}const i=n=>fetch(n,{method:"GET",cache:"no-cache"}).then(s=>s.json()),m=(n,s)=>i(n).then(r=>r.data.filter(e=>!!e.eta&&(s==null||e.dest_tc==s)).map(e=>{var t={company:"KMB",eta:new Date(Date.parse(e.eta)),dataTime:new Date(Date.parse(e.data_timestamp))};return t})),p=(n,s)=>i(n).then(r=>r.data.filter(e=>!!e.eta&&(s==null||e.dest_tc==s)).map(e=>{var t={company:"Citybus",eta:new Date(Date.parse(e.eta)),dataTime:new Date(Date.parse(e.data_timestamp))};return t})),h=(n,s,r,e)=>Promise.all([Array.isArray(n)?Promise.all(n.map(t=>m(t,s))):Promise.resolve(null),Array.isArray(r)?Promise.all(r.map(t=>p(t,e))):Promise.resolve(null)]).then(t=>t.filter(a=>!!a).reduce((a,o)=>[...a,...o.reduce((u,l)=>[...u,...l],[])],[])),d=[{name:"116 - HH to Tak Oi",kmbURL:["https://data.etabus.gov.hk/v1/transport/kmb/eta/11B2034DDF30617A/116/1"],kmbDestTC:"慈雲山(中)",citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/001475/116"],citybusDestTC:"慈雲山(中)",otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/116-1-quarry-bay-(yau-man-street)-tsz-wan-shan-(central)/001475%2C12"}]},{name:"793 - 新蒲崗 Mikiki to 將軍澳 先進製造業中心, 駿光街",kmbURL:null,kmbDestTC:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/001573/793"],citybusDestTC:"將軍澳工業邨",otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/793-1-so-uk-tseung-kwan-o-industrial-estate/001573%2C19"}]},{name:"793 - 調景嶺 to 將軍澳 先進製造業中心, 駿光街",kmbURL:null,kmbDestTC:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/002917/793"],citybusDestTC:null,otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/793-1-so-uk-tseung-kwan-o-industrial-estate/002917%2C26"}]},{name:"796X - 調景嶺 to 將軍澳 先進製造業中心, 駿光街",kmbURL:null,kmbDestTC:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/002917/796X"],citybusDestTC:"將軍澳工業邨",otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/796x-2-tsim-sha-tsui-east-tseung-kwan-o-industrial-estate"}]},{name:"796X - 將軍澳 先進製造業中心, 駿光街 to HH",kmbURL:null,kmbDestTC:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/002927/796X"],citybusDestTC:null,otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/796x-1-tseung-kwan-o-industrial-estate-tsim-sha-tsui-east/002927%2C4"},{name:"hkbus.app",url:"https://hkbus.app/zh/route/796x-1-tseung-kwan-o-industrial-estate-%EF%BC%8F-tseung-kwan-o-station-tsim-sha-tsui-east/002927%2C4"}]},{name:"796X - 將軍澳 日出康城領都, 環保大道 to HH",kmbURL:null,kmbDestTC:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/002928/796X"],citybusDestTC:null,otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/796x-1-tseung-kwan-o-industrial-estate-tsim-sha-tsui-east/002928%2C5"},{name:"hkbus.app",url:"https://hkbus.app/zh/route/796x-1-tseung-kwan-o-industrial-estate-%EF%BC%8F-tseung-kwan-o-station-tsim-sha-tsui-east/002928%2C5"}]}];(n=>{n&&Promise.all(d.map(s=>{const r=document.createElement("details"),e=document.createElement("summary");r.open=!0,e.innerHTML=`<div style="display: contents">${s.name} ${s.otherPlatforms.map(({url:a,name:o})=>`<a href="${a}" target="_blank">${o}</a>`).join("&nbsp;")}</div>`;const t=document.createElement("ol");return r.appendChild(t),r.appendChild(e),n.appendChild(r),h(s.kmbURL,s.kmbDestTC,s.citybusURL,s.citybusDestTC).then(a=>({routeName:s.name,vehicles:a,dom:{detailsElement:r,summaryElement:e,orderListElement:t},otherPlatforms:s.otherPlatforms}))})).then(s=>{s.forEach(r=>{r.vehicles.sort((e,t)=>e.eta.getTime()-t.eta.getTime()).forEach(e=>{const t=document.createElement("li"),a=c(e.eta,e.dataTime);t.innerText=`[${a.minutes} mins ${a.seconds} secs] ${e.company}`,r.dom.orderListElement.appendChild(t)})})})})(document.querySelector("#app"));
