(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(e){if(e.ep)return;e.ep=!0;const a=t(e);fetch(e.href,a)}})();function c(n,r){const t=n.getTime(),s=r.getTime(),e=Math.abs(s-t),a=Math.floor(e/1e3),o=Math.floor(a/60),l=a%60;return{minutes:o,seconds:l}}const i=n=>fetch(n,{method:"GET",cache:"no-cache"}).then(r=>r.json()),u=n=>i(n).then(r=>r.data.filter(t=>!!t.eta).map(t=>{var s={company:"KMB",eta:new Date(Date.parse(t.eta)),dataTime:new Date(Date.parse(t.data_timestamp))};return s})),m=n=>i(n).then(r=>r.data.filter(t=>!!t.eta).map(t=>{var s={company:"Citybus",eta:new Date(Date.parse(t.eta)),dataTime:new Date(Date.parse(t.data_timestamp))};return s})),p=(n,r)=>Promise.all([Array.isArray(n)?Promise.all(n.map(t=>u(t))):Promise.resolve(null),Array.isArray(r)?Promise.all(r.map(t=>m(t))):Promise.resolve(null)]).then(t=>t.filter(s=>!!s).reduce((s,e)=>[...s,...e.reduce((a,o)=>[...a,...o],[])],[])),d=[{name:"116 - HH to Tak Oi",kmbURL:["https://data.etabus.gov.hk/v1/transport/kmb/eta/11B2034DDF30617A/116/1"],citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/001475/116"],otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/116-1-quarry-bay-(yau-man-street)-tsz-wan-shan-(central)/001475%2C12"}]},{name:"793 - TKL to TKO",kmbURL:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/002917/793"],otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/793-1-so-uk-tseung-kwan-o-industrial-estate/002917%2C26"}]},{name:"793 - Mikiki to TKO",kmbURL:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/001573/793"],otherPlatforms:[{name:"hkbus.app",url:"https://hkbus.app/zh/route/793-1-so-uk-tseung-kwan-o-industrial-estate/001573%2C19"}]},{name:"796X - TKO 先進製造業中心, 駿光街 to HH",kmbURL:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/002927/796X"],otherPlatforms:[{name:"hkbus.app",url:""}]},{name:"796X - TKO 日出康城領都, 環保大道 to HH",kmbURL:null,citybusURL:["https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/002928/796X"],otherPlatforms:[{name:"hkbus.app",url:""}]}];(n=>{n&&Promise.all(d.map(r=>{const t=document.createElement("details"),s=document.createElement("summary");t.open=!0,s.innerHTML=`<div style="display: contents">${r.name} ${r.otherPlatforms.map(({url:a,name:o})=>`<a href="https://www.google.com/search?${a}" target="_blank">${o}</a>`).join("&nbsp;")}</div>`;const e=document.createElement("ol");return t.appendChild(e),t.appendChild(s),n.appendChild(t),p(r.kmbURL,r.citybusURL).then(a=>({routeName:r.name,vehicles:a,dom:{detailsElement:t,summaryElement:s,orderListElement:e},otherPlatforms:r.otherPlatforms}))})).then(r=>{r.forEach(t=>{t.vehicles.sort((s,e)=>s.eta.getTime()-e.eta.getTime()).forEach(s=>{const e=document.createElement("li"),a=c(s.eta,s.dataTime);e.innerText=`[${a.minutes} mins ${a.seconds} secs] ${s.company}`,t.dom.orderListElement.appendChild(e)})})})})(document.querySelector("#app"));
